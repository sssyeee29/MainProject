<!--
    ÏóêÏΩîÎßàÏºì ÏÉÅÌíà ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄ
    @author : sehui
    @fileName : eco-market-detail.html
    @since : 250730
    @history
     - 250730 | sehui | ÏóêÏΩîÎßàÏºì ÏÉÅÌíà ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄ ÏùºÎ∂Ä ÏàòÏ†ï(th:* ÏàòÏ†ï, Í≥µÌÜµ Î†àÏù¥ÏïÑÏõÉ Ï∂îÍ∞Ä)
     - 250731 | sehui | Ïû•Î∞îÍµ¨Îãà, Íµ¨Îß§ÌïòÍ∏∞ Î≤ÑÌäºÏóê Î°úÍ∑∏Ïù∏ Ïó¨Î∂Ä data ÏÜçÏÑ±ÏúºÎ°ú Ï∂îÍ∞Ä
     - 250731 | sehui | Ìó§Îçî/Ìë∏ÌÑ∞ Ï∂©Îèå Î∞©ÏßÄÎ•º ÏúÑÌïú ÌÅ¥ÎûòÏä§Î™Ö Î≥ÄÍ≤Ω Î∞è Íµ¨Ï°∞ Í∞úÏÑ†
     - 250801 | sehui | Ï£ºÎ¨∏ ÏàòÎüâ HTML Ï∂îÍ∞Ä
-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<head th:with="pageTitle='ÏóêÏΩîÎßàÏºì'">
    <title>ÏóêÏΩîÎßàÏºì ÏÉÅÌíà ÏÉÅÏÑ∏Î≥¥Í∏∞</title>

    <!-- Ï∂îÍ∞Ä css -->
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/eco-market-detail.css}">
    </th:block>

</head>
<body th:data-member-id = "${#authentication.principal != 'anonymousUser'} ? ${#authentication.principal.memberId} : ''">
    <!-- Î≥∏Î¨∏ fragment -->
    <div layout:fragment="content" class="product-detail-page">

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† ÏòÅÏó≠ -->
        <main class="product-main-content">

            <!-- Î∏åÎ†àÎìúÌÅ¨Îüº ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò (ÌòÑÏû¨ ÏúÑÏπò ÌëúÏãú) -->
            <section class="product-breadcrumb-section">
                <div class="product-container">
                    <nav class="product-breadcrumb">
                        <a th:href="@{/}">Ìôà</a>
                        <span class="product-breadcrumb-separator">></span>
                        <a th:href="@{/eco/list}">ÏóêÏΩîÎßàÏºì</a>
                        <span class="product-breadcrumb-separator">></span>
                        <span id="breadcrumbCategory">Ïπ¥ÌÖåÍ≥†Î¶¨Î™Ö</span>
                        <span class="product-breadcrumb-separator">></span>
                        <span class="product-breadcrumb-current">ÏÉÅÌíà ÏÉÅÏÑ∏Î≥¥Í∏∞</span>
                    </nav>
                </div>
            </section>

            <!-- ÏÉÅÌíà ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÏÑπÏÖò -->
            <section class="product-detail-section">
                <div class="product-container">
                    <div class="product-detail-container">
                        <!-- ÏôºÏ™Ω: ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ ÏòÅÏó≠ -->
                        <div class="product-images">
                            <!-- Î©îÏù∏ Ïù¥ÎØ∏ÏßÄ -->
                            <div class="main-image-container">
                                <div class="main-image" id="mainImage">
                                    <img id="mainImageTag" alt="mainImage" style="display: none;">
                                    <!-- Î©îÏù∏ Ïù¥ÎØ∏ÏßÄ JSÎ°ú ÏÇΩÏûÖ -->
                                </div>
                                <!-- Ïù¥ÎØ∏ÏßÄ ÌôïÎåÄ Î≤ÑÌäº -->
                                <button class="image-zoom-btn" id="imageZoomBtn">üîç</button>
                            </div>

                            <!-- Ïç∏ÎÑ§Ïùº Ïù¥ÎØ∏ÏßÄ Î™©Î°ù - Î∞òÎ≥µÎ¨∏ÏúºÎ°ú Ï∂úÎ†• -->
                            <div class="thumbnail-container" id="thumbnailContainer">
                                <div class="thumbnail-list" id="thumbnailList">
                                <!-- Ïç∏ÎÑ§Ïùº Ïù¥ÎØ∏ÏßÄ JSÎ°ú ÏÇΩÏûÖ -->
                                </div>
                            </div>
                        </div>

                        <!-- Ïò§Î•∏Ï™Ω: ÏÉÅÌíà Ï†ïÎ≥¥ ÏòÅÏó≠ -->
                        <div class="product-info">
                            <!-- ÏÉÅÌíà Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
                            <div class="product-header">
                                <!-- ÏÉÅÌíà ÌåêÎß§ ÏÉÅÌÉú Î∞∞ÏßÄ -->
                                <div class="product-status-badge available" id="productStatus">ÌåêÎß§ ÏÉÅÌÉú</div>

                                <!-- ÏÉÅÌíà Ï†úÎ™© -->
                                <h1 class="product-title" id="productTitle">ÏÉÅÌíàÎ™Ö</h1>

                                <!-- ÏÉÅÌíà Î©îÎâ¥ (Í¥ÄÎ¶¨ÏûêÏùº Í≤ΩÏö∞Îßå ÌëúÏãú) -->
                                <div class="product-menu" style="display: none;">
                                    <button class="menu-toggle" id="menuToggle">‚ãØ</button>
                                    <div class="menu-dropdown" id="menuDropdown">
                                        <button class="menu-item" id="editProduct"
                                                sec:authorize="hasAnyAuthority('ROLE_ADMIN')"
                                                th:data-item-id="${itemId}">ÏàòÏ†ïÌïòÍ∏∞</button>
                                    </div>
                                </div>

                                <!-- ÏÉÅÌíà Î©îÌÉÄ Ï†ïÎ≥¥ -->
                                <div class="product-meta">
                                    <span class="product-category" id="productCategory">Ïπ¥ÌÖåÍ≥†Î¶¨</span>
                                </div>
                            </div>

                            <!-- Í∞ÄÍ≤© Ï†ïÎ≥¥ -->
                            <div class="price-section">
                                <div class="current-price" id="currentPrice">Í∞ÄÍ≤©</div>
                            </div>

                            <!-- Ïû¨Í≥† ÏàòÎüâ Ï†ïÎ≥¥ -->
                            <div class="stock-section">
                                <h3>Ïû¨Í≥† ÏàòÎüâ</h3>
                                <div class="stock-info">
                                    <div class="stock-number" id="stockNumber">Ïû¨Í≥†ÏàòÎüâ</div>
                                </div>
                            </div>

                            <!-- Ï£ºÎ¨∏ ÏàòÎüâ ÏûÖÎ†• -->
                            <form id="form-body">
                                <input type="hidden" name="itemId" id="itemId" th:value="${itemId}" />

                                <div class="form-row">
                                    <div class="form-label-section">
                                        <label class="form-label">Ï£ºÎ¨∏ ÏàòÎüâ</label>
                                    </div>
                                    <div class="form-input-section">
                                        <div class="order-group">
                                            <div class="order-input-wrapper">
                                                <input type="number"
                                                       class="form-input order-input"
                                                       name="count"
                                                       id="orderNumber"
                                                       placeholder="0"
                                                       min="1"
                                                       required>
                                                <span class="currency">Í∞ú</span>
                                            </div>
                                        </div>
                                        <div class="error-message" id="stockError"></div>
                                        <div class="help-text">ÏµúÏÜå 1Í∞ú Ïù¥ÏÉÅÎ∂ÄÌÑ∞ Îì±Î°ù Í∞ÄÎä•Ìï©ÎãàÎã§.</div>
                                        <!-- Ïû¨Í≥† ÏàòÎüâ Î∂ÑÏÑù (JavaScriptÎ°ú Ï†úÏñ¥) -->
                                        <div class="order-analysis" id="orderAnalysis"></div>
                                    </div>
                                </div>
                            </form>

                            <!-- Í±∞Îûò Ï†ïÎ≥¥ -->
                            <div class="transaction-section">
                                <div class="transaction-info">
                                    <div class="info-item" id="shippingFeeContainer">
                                        <span class="info-label">Î∞∞ÏÜ°ÎπÑ</span>
                                        <span class="info-value" id="shippingFee">Î¨¥Î£å Î∞∞ÏÜ°</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Ïï°ÏÖò Î≤ÑÌäº ÏòÅÏó≠ -->
                            <div class="action-buttons" id="actionButtons" th:if="${#authorization.expression('!hasRole(''ADMIN'')')}"
                                 th:data-logged-in="${#authentication.principal != 'anonymousUser'}">
                                <!-- Ïû•Î∞îÍµ¨Îãà Î≤ÑÌäº -->
                                <button class="btn btn-cart" id="cartBtn">üõí Ïû•Î∞îÍµ¨Îãà</button>
                                <!-- Íµ¨Îß§ÌïòÍ∏∞ Î≤ÑÌäº -->
                                <button class="btn btn-buy" id="buyBtn">üí∞ Íµ¨Îß§ÌïòÍ∏∞</button>
                            </div>

                            <!-- Í≥µÏú† Î≤ÑÌäº -->
                            <div class="share-section">
                                <span class="share-label">Í≥µÏú†ÌïòÍ∏∞</span>
                                <div class="share-buttons">
                                    <button class="share-btn" data-type="link" title="ÎßÅÌÅ¨ Î≥µÏÇ¨" onclick="shareProduct('link')">üîó</button>
                                    <button class="share-btn" data-type="kakao" title="Ïπ¥Ïπ¥Ïò§ÌÜ°" onclick="shareProduct('kakao')">üí¨</button>
                                    <button class="share-btn" data-type="facebook" title="ÌéòÏù¥Ïä§Î∂Å" onclick="shareProduct('facebook')">üìò</button>
                                    <button class="share-btn" data-type="twitter" title="Ìä∏ÏúÑÌÑ∞" onclick="shareProduct('twitter')">üê¶</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÏÉÅÌíà ÏÉÅÏÑ∏ ÏÑ§Î™Ö ÏÑπÏÖò -->
            <section class="product-description-section">
                <div class="product-container">
                    <div class="description-container">
                        <h2>ÏÉÅÌíà ÏÉÅÏÑ∏ ÏÑ§Î™Ö</h2>
                        <!-- ÏÉÅÌíà ÏÑ§Î™Ö ÎÇ¥Ïö© - HTML ÌÉúÍ∑∏Í∞Ä Ìè¨Ìï®Îê† Ïàò ÏûàÏúºÎØÄÎ°ú utext ÏÇ¨Ïö© -->
                        <div class="description-content" id="productDescription">
                            <!-- JSÎ°ú ÎèôÏ†ÅÏúºÎ°ú Í∏∞Î≥∏ ÏÑ§Î™Ö ÎÇ¥Ïö© ÏÇΩÏûÖ -->
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Ïù¥ÎØ∏ÏßÄ ÌôïÎåÄ Î™®Îã¨ -->
    <div class="modal" id="imageModal">
        <div class="modal-content image-modal-content">
            <div class="modal-header">
                <h3>ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ</h3>
                <button class="modal-close" id="closeImageModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-image-container">
                    <div class="modal-main-image" id="modalMainImage">
                        <img src="" alt="ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ" style="display: none;">
                    </div>
                    <div class="modal-image-controls" id="modalImageControls">
                        <button class="image-nav-btn" id="prevImageBtn">‚Äπ</button>
                        <span class="image-counter" id="imageCounter">1 / 1</span>
                        <button class="image-nav-btn" id="nextImageBtn">‚Ä∫</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript ÌååÏùº Ïó∞Í≤∞ - Thymeleaf Ï†ïÏ†Å Î¶¨ÏÜåÏä§ Í≤ΩÎ°ú -->
    <th:block layout:fragment="script">
        <script th:src="@{/js/eco-market-detail.js}"></script>
    </th:block>

</body>
</html>