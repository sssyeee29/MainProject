<!--
 * Î¨¥Î£åÎÇòÎàî Í≤åÏãúÌåê ÏÉÅÏÑ∏ÌéòÏù¥ÏßÄ
 * Í≤åÏãúÍ∏ÄÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥, Ïù¥ÎØ∏ÏßÄ, ÎåìÍ∏Ä Îì±ÏùÑ ÌôïÏù∏ÌïòÍ≥† Í¥ÄÎ¶¨Ìï† Ïàò ÏûàÎäî ÌôîÎ©¥
 *
 * [ÌîÑÎ°†Ìä∏ÏóîÎìú Í∏∞Îä• - by eunji]
 * - ÏÉÅÌíà ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ Î∞è Ïç∏ÎÑ§Ïùº Ïù¥ÎØ∏ÏßÄ Ï∂úÎ†• ÏòÅÏó≠ Íµ¨ÏÑ±
 * - ÏÉÅÌíà Ï†ïÎ≥¥(Ï†úÎ™©, Ïπ¥ÌÖåÍ≥†Î¶¨, ÏÉÅÌÉú, ÏßÄÏó≠, Îì±Î°ùÏùº Îì±) UI ÌëúÏãú
 * - ÏûëÏÑ±Ïûê/Í¥ÄÎ¶¨ÏûêÏùº Í≤ΩÏö∞ ÏàòÏ†ï/ÏÇ≠Ï†ú Î≤ÑÌäº ÌëúÏãú
 * - ÏÉÅÏÑ∏ ÏÑ§Î™Ö ÏòÅÏó≠ Î∂ÑÎ¶¨ Íµ¨ÏÑ±
 * - ÎåìÍ∏Ä ÏûÖÎ†•, Ï†ïÎ†¨ ÎìúÎ°≠Îã§Ïö¥, ÎåìÍ∏Ä Î™©Î°ù Ï∂úÎ†• Î∞è ÌéòÏù¥Ïßï UI Íµ¨ÏÑ±
 * - free-sharing-detail.jsÎ•º ÌÜµÌï¥ ÎπÑÎèôÍ∏∞ Î∞©ÏãùÏúºÎ°ú ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Î∞è ÎåìÍ∏Ä Î†åÎçîÎßÅ
 * - CSS Ïä§ÌÉÄÏùºÎßÅÏùÄ free-sharing-detail.cssÏóêÏÑú Îã¥Îãπ
 *
 * [Î∞±ÏóîÎìú Í∏∞Îä• - by yeonsu]
 * - Í≤åÏãúÍ∏Ä Ï†ïÎ≥¥ Ï†ÑÎã¨: board, loginMemberNickname, loginMemberRole Îì±
 * - Î°úÍ∑∏Ïù∏ Ïó¨Î∂Ä ÌåêÎã® ÌõÑ ÎåìÍ∏Ä ÏûëÏÑ± Ìèº ÎòêÎäî Î°úÍ∑∏Ïù∏ ÏïàÎÇ¥ Ï∂úÎ†• (Thymeleaf Ï°∞Í±¥Î¨∏)
 * - ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÏùº Í≤ΩÏö∞ÏóêÎßå ÏàòÏ†ï/ÏÇ≠Ï†ú Î≤ÑÌäº ÌëúÏãú (Thymeleaf Ï°∞Í±¥Î¨∏ + Spring Security)
 * - ÎåìÍ∏Ä Ï†ïÎ†¨ Î∞è ÌéòÏù¥ÏßïÏùÄ JSÏóêÏÑú fetch Ìò∏Ï∂úÎ°ú Ï≤òÎ¶¨, Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥Îäî window.loginUserId Îì±ÏúºÎ°ú JSÏóê Ï†ÑÎã¨
 * - Î†àÏù¥ÏïÑÏõÉ ÌÖúÌîåÎ¶ø(layout1.html) Î∞è Ìó§Îçî fragment(header.html) Ï†ÅÏö©
 * - Í≤åÏãúÍ∏Ä ÏÉÅÏÑ∏Î≥¥Í∏∞ÏóêÏÑú Î™©Î°ù ÌéòÏù¥ÏßÄÎ°ú ÎèåÏïÑÍ∞à Îïå ÌòÑÏû¨ ÌéòÏù¥ÏßÄ Î≤àÌò∏ Ï†ÑÎã¨ (th:href="@{/free/list(page=${page})}")
 *
 * @author   : eunji, yeonsu
 * @fileName : detail.html
 * @since    : 250728
-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<head th:with="pageTitle='Î¨¥Î£åÎÇòÎàî'">
    <title>Î¨¥Î£åÎÇòÎàî</title>
    <th:block layout:fragment="css">
        <!-- Ï∂îÍ∞Ä CSS (ÌïÑÏöîÏãúÎßå) -->
        <link rel="stylesheet" th:href="@{/css/free-sharing-detail.css}">
    </th:block>
</head>

<th:block layout:fragment="header" th:replace="~{fragments/header :: header}"></th:block>

<!-- Î©îÏù∏ ÎÇ¥Ïö© -->
<div layout:fragment="content">

    <!-- ÌòÑÏû¨ ÏúÑÏπò ÌëúÏãú (ÎπµÎ∂ÄÏä§Îü¨Í∏∞) -->
    <section class="breadcrumb">
        <div class="container">
            <nav class="breadcrumb-nav">
                <a th:href="@{/}">üè†</a>
                <span>></span>
                <a th:href="@{/free/list}">Î¨¥Î£åÎÇòÎàî</a>
                <span>></span>
                <span class="current">ÏÉÅÏÑ∏Î≥¥Í∏∞</span>
            </nav>
        </div>
    </section>

    <!-- ÏÉÅÏÑ∏Î≥¥Í∏∞ ÎÇ¥Ïö© -->
    <section class="detail-section">
        <div class="container">
            <!-- üî• ÏàòÏ†ï: Î™©Î°ùÏúºÎ°ú ÎèåÏïÑÍ∞ÄÎäî Î≤ÑÌäº Ï∂îÍ∞Ä -->
            <div class="back-to-list">
                <a th:href="@{/free/list(page=${page})}" class="back-btn">
                    <span class="icon">‚Üê</span>
                    Î™©Î°ùÎ≥¥Í∏∞
                </a>
            </div>
            <div class="detail-container">
                <!-- ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ ÏÑπÏÖò -->
                <div class="image-section">
                    <!-- Î©îÏù∏ Ïù¥ÎØ∏ÏßÄ -->
                    <div class="main-image">
                        <!-- srcÎäî JSÏóêÏÑú ÏÑ§Ï†ïÌïòÎØÄÎ°ú ÎπÑÏõåÎë† -->
                        <img id="mainImage" alt="ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ">
                    </div>
                    <!-- Ïç∏ÎÑ§Ïùº Ïù¥ÎØ∏ÏßÄ Ïª®ÌÖåÏù¥ÎÑà -->
                    <div class="thumbnail-images" id="thumbnailImages">
                        <!-- JSÏóêÏÑú Ïù¥ÎØ∏ÏßÄ Ïç∏ÎÑ§Ïùº <img> ÏöîÏÜåÎì§ÏùÑ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú ÏÇΩÏûÖ -->
                    </div>
                </div>

                <!-- ÏÉÅÌíà Ï†ïÎ≥¥ ÏÑπÏÖò -->
                <div class="info-section">
                    <!-- ÏÉÅÌíà Ìó§Îçî (Ï†úÎ™©Í≥º Í¥ÄÎ¶¨ Î≤ÑÌäº) -->
                    <div class="product-header">
                        <div class="product-title-area">
                            <!-- ÏÉÅÌÉú Î∞∞ÏßÄ -->
                            <div class="status-badge" id="itemStatus" th:text="${board.dealStatus == T(com.ecovery.constant.DealStatus).ONGOING} ? 'ÎÇòÎàîÏ§ë' : 'ÎÇòÎàî ÏôÑÎ£å'">ÎÇòÎàî ÏÉÅÌÉú</div>
                            <!-- ÏÉÅÌíà Ï†úÎ™© -->
                            <h1 class="product-title" id="itemTitle">Ï†úÎ™©</h1>
                        </div>

                        <!-- ÏûëÏÑ±Ïûê Ï†ïÎ≥¥ -->
                        <div class="author-info">
                            <div class="author-details">
                                <div class="author-name" id="authorNickname">ÏûëÏÑ±Ïûê</div>
                                <div class="author-meta">
                                    <span class="view-count" id="viewCount">üëÄ 0</span>
                                    <span class="post-date" id="createdAt">Î∞©Í∏à Ï†Ñ</span>
                                </div>
                            </div>
                        </div>

                        <!-- ÏÉÅÌíà ÏÉÅÏÑ∏ Ï†ïÎ≥¥ -->
                        <div class="product-details">
                            <div class="detail-row">
                                <span class="detail-label">Ïπ¥ÌÖåÍ≥†Î¶¨</span>
                                <span class="detail-value" id="detailCategory">Í∞ÄÍµ¨</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Ï†úÎ™©</span>
                                <span class="detail-value" id="detailTitle">ÎÇòÎàî Ï†úÎ™©</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">ÏûëÏÑ±Ïûê</span>
                                <span class="detail-value" id="detailAuthor">ÏûëÏÑ±Ïûê ÎãâÎÑ§ÏûÑ</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Îì±Î°ùÏùº</span>
                                <span class="detail-value" id="detailDate">2025.07.29</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">ÏÉÅÌíà ÏÉÅÌÉú</span>
                                <span class="detail-value" id="detailCondition">ÏÉÅ (Îß§Ïö∞Ï¢ãÏùå)</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">ÎÇòÎàî ÏßÄÏó≠</span>
                                <span class="detail-value">
                                <span id="regionGu">Í∞ïÎÇ®Íµ¨</span>
                                <span id="regionDong">Ïó≠ÏÇºÎèô</span>
                            </span>
                            </div>
                        </div>

                        <!-- Í¥ÄÎ¶¨ Î≤ÑÌäº (ÏàòÏ†ïÎêú ÏúÑÏπò) -->
                        <!-- STEP 1: Î°úÍ∑∏Ïù∏Ìïú ÏÇ¨Ïö©ÏûêÎßå Í¥ÄÎ¶¨ Î≤ÑÌäº ÏòÅÏó≠ ÏßÑÏûÖ -->
                        <div class="product-actions"
                             th:if="${#authentication.authenticated}"
                             id="productActions">

                            <!-- STEP 2: ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÏùº Í≤ΩÏö∞ÏóêÎßå Î≤ÑÌäº ÌëúÏãú -->
                            <!-- ÏàòÏ†ï/ÏÇ≠Ï†ú Î≤ÑÌäºÏùÄ Î°úÍ∑∏Ïù∏Ìïú ÏÇ¨Ïö©ÏûêÏù¥Î©¥ÏÑú ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÏùº ÎïåÎßå ÌëúÏãú -->
                            <div th:if="${loginMemberNickname != null and (loginMemberNickname == board.nickname or loginMemberRole?.name() == 'ADMIN')}" class="dropdown">
                                <div class="dropdown-menu" id="dropdownMenu">
                                    <!-- ÏàòÏ†ïÌïòÍ∏∞ Î≤ÑÌäº -->
                                    <a th:href="@{'/free/modify/' + ${board.freeId}}" class="action-btn edit-btn" id="editBtn">
                                        <span class="icon">‚úèÔ∏è</span>
                                        ÏàòÏ†ï
                                    </a>
                                    <!-- ÏÇ≠Ï†úÌïòÍ∏∞ Î≤ÑÌäº -->
                                    <button class="action-btn delete-btn" id="deleteBtn">
                                        <span class="icon">üóëÔ∏è</span>
                                        ÏÇ≠Ï†ú
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- üî• ÏàòÏ†ï: ÏÉÅÏÑ∏ ÏÑ§Î™Ö ÏÑπÏÖòÏùÑ Î≥ÑÎèÑÎ°ú Î∂ÑÎ¶¨ÌïòÏó¨ Ïù¥ÎØ∏ÏßÄ+Ï†ïÎ≥¥ ÏïÑÎûòÎ°ú Ïù¥Îèô -->
                <div class="description-section">
                    <h2>üìù ÏÉÅÏÑ∏ ÏÑ§Î™Ö</h2>
                    <div class="description-content" id="detailContent">
                        <!-- JSÏóêÏÑú ÎÇ¥Ïö©Ïù¥ ÏÑ§Ï†ïÎê©ÎãàÎã§ -->
                    </div>
                </div>

                <!-- üí¨ ÎåìÍ∏Ä Ï†ÑÏ≤¥ Î∏îÎ°ùÏùÄ Î°úÍ∑∏Ïù∏ Ïó¨Î∂Ä Í¥ÄÍ≥ÑÏóÜÏù¥ Ìï≠ÏÉÅ Î†åÎçîÎßÅ -->
                <div class="comments">
                    <!-- ÎåìÍ∏Ä Ìó§Îçî: Ï†úÎ™©Í≥º Ï†ïÎ†¨ ÎìúÎ°≠Îã§Ïö¥ÏùÑ ÏñëÏ™Ω ÎÅùÏóê Î∞∞Ïπò -->
                    <div class="comment-header">
                        <h2>üí¨ ÎåìÍ∏Ä</h2>
                        <div class="comment-sort">
                            <label for="sortSelect">Ï†ïÎ†¨:</label>
                            <select id="sortSelect">
                                <option value="recent">ÏµúÏã†Ïàú</option>
                                <option value="oldest">Îì±Î°ùÏàú</option>
                            </select>
                        </div>
                    </div>

                    <!-- ÎåìÍ∏Ä ÏûëÏÑ± Ìèº Ìó§Îçî: ÏûÖÎ†•Ï∞ΩÍ≥º Îì±Î°ù Î≤ÑÌäºÏùÑ ÏñëÏ™Ω ÎÅùÏóê Î∞∞Ïπò -->
                    <div th:if="${loginMemberNickname != null}" class="comment-form">
                        <textarea id="commentContent" placeholder="ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."></textarea>
                        <button id="submitCommentBtn">Îì±Î°ù</button>
                    </div>

                    <!-- ÎåìÍ∏Ä Î™©Î°ùÏùÄ Î°úÍ∑∏Ïù∏ Ïó¨Î∂Ä Í¥ÄÍ≥ÑÏóÜÏù¥ Ìï≠ÏÉÅ Î≥¥Ïó¨Ïïº Ìï® -->
                    <div class="comment-list" id="commentList">
                        <!-- ÎåìÍ∏Ä ÏïÑÏù¥ÌÖúÎì§Ïù¥ JavaScriptÎ°ú Î†åÎçîÎßÅÎê® -->
                    </div>

                    <!-- ‚úÖ Ïó¨Í∏∞Ïóê ÌéòÏù¥Ïßï ÏòÅÏó≠ Ï∂îÍ∞Ä -->
                    <div class="reply-pagination" id="pagination"></div>

                    <!-- Î°úÍ∑∏Ïù∏ÌïòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ ÏïàÎÇ¥ Î¨∏Íµ¨ -->
                    <div th:if="${loginMemberNickname == null}" class="comment-form-disabled">
                        <p>‚úèÔ∏è ÎåìÍ∏ÄÏùÑ ÏûëÏÑ±ÌïòÎ†§Î©¥ <a th:href="@{/member/login}">Î°úÍ∑∏Ïù∏</a> Ìï¥Ï£ºÏÑ∏Ïöî.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<th:block layout:fragment="script">
    <!-- Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ Ï†ÑÎã¨ -->
    <script th:inline="javascript">
        /*<![CDATA[*/
        window.loginUserId = [[${loginMember?.memberId}]];
        window.loginUserRole = [[${loginMember?.role?.name()}]];
        /*]]>*/
    </script>

    <!-- Î©îÏù∏ JS ÌååÏùº -->
    <script th:src="@{/js/free-sharing-detail.js}"></script>
</th:block>
</html>